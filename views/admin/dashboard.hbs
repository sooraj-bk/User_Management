<link rel="stylesheet" href="/styles/adminDashboard.css">
     <!--navbar-->
     <nav class="navbar">
      <h1>Admin Dashboard</h1>
      <button class="login-btn" onclick="window.location.href='/admin/logout'">Logout</button>
     </nav>

    
    <main class="dashboard-container">
      <h2>User Management</h2>
      <div class="table-controls">
        <button class="add-user-btn" onclick="openAddUserModal()">Add User</button>
      </div>
      <table class="user-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Email</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {{#each users}}
          <tr>
            <td>{{@index}}</td>
            <td>{{this.email}}</td>
            <td>
              <button class="edit-btn" onclick="openEditUserModal('{{this._id}}','{{this.email}}')">Edit</button>
              <button class="delete-btn" onclick="deleteUser('{{this._id}}')">Delete</button>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
    </main>


    <div class="modal" id="addUserModal">
      <div class="modal-content">
        <span class="close" onclick="closeAddUserModal()">&times;</span>
        <h2>Add User</h2>
        <form action="/admin/add-user" method="post" id="addUserForm">
        <label for="addEmail">Email:</label>
        <input type="email" name="email" id="addEmail" required>
        <label for="addPassword">Password:</label>
        <input type="password" name="password" id="addPassword" required>
        <button type="submit" class="modal-btn">Add User</button>
        </form>
      </div>
    </div>


  <div class="modal" id="editUserModal">
      <div class="modal-content">
        <span class="close" onclick="closeEditUserModal()">&times;</span>
        <h2>Edit User</h2>
        <form action="/admin/edit-user" method="post" id="editUserForm">
        <input type="hidden" id="editUserId" name="id">
        <label for="editEmail">Email:</label>
        <input type="email" name="email" id="editEmail" required>
        <label for="editPassword">Password:</label>
        <input type="password" name="password" id="editPassword" required>
        <button type="submit" class="modal-btn">Save Changes</button>
        </form>
      </div>
    </div>

    <script>
      function openAddUserModal(){
        document.getElementById('addUserModal').style.display ='block'
      }

      function closeAddUserModal(){
        document.getElementById('addUserModal').style.display ='none'
      }

      function openEditUserModal(id,email){
        document.getElementById('editUserModal').style.display ='block'
        document.getElementById('editUserId').value =id
        document.getElementById('editEmail').value =email
      }

      function closeEditUserModal(){
        document.getElementById('editUserModal').style.display ='none'
      }

      function deleteUser(userId){
        if(confirm('Are you sure you want to delete this user?')){
          window.location.href=`/admin/delete-user/${userId}`
        }

      }
    </script>

